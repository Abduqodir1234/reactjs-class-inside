{"ast":null,"code":"var _jsxFileName = \"C:\\\\For Personal Use\\\\Django Projects\\\\github\\\\django-react\\\\a\\\\reactjs\\\\src\\\\pages\\\\compenents\\\\profile_form.jsx\";\nimport axios from 'axios';\nimport cookie from 'react-cookies';\nimport React, { Component } from 'react';\nimport { Link, Redirect } from \"react-router-dom\";\nimport Navbar from './Navbar';\nimport { I18nProvider, LOCALES } from '../i18n';\nimport translate from '../i18n/tranlate';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ProfileForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: null,\n      username_error: '',\n      first_name: null,\n      first_name_error: '',\n      last_name: null,\n      last_name_error: '',\n      email: null,\n      email: '',\n      wishlist: 0,\n      cart: 0,\n      ok: false\n    };\n    this.handlefield = this.handlefield.bind(this);\n    this.lang2 = this.lang2.bind(this);\n    this.handlesubmit = this.handlesubmit.bind(this);\n  }\n\n  componentDidMount() {\n    axios.get('http://127.0.0.1:8000/rtqkaq2345akdker24/').then(response => {\n      this.setState({\n        username: response.data.username,\n        first_name: response.data.first_name,\n        last_name: response.data.last_name,\n        email: response.data.email\n      });\n    }).catch(errors => {\n      console.log(errors);\n    });\n    axios.get('http://127.0.0.1:8000/sdlkewrws/').then(response => {\n      this.setState({\n        cart: response.data.cart,\n        wishlist: response.data.wishlist\n      });\n    });\n  }\n\n  handlefield(event) {\n    event.preventDefault();\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  lang1() {\n    if (localStorage.getItem('lang') === 'en') {\n      return LOCALES.English;\n    } else if (localStorage.getItem('lang') === 'ru') {\n      return LOCALES.Russian;\n    } else if (localStorage.getItem('lang') === 'uz') {\n      return LOCALES.Uzbek;\n    } else {\n      console.log(\"Error\");\n    }\n  }\n\n  lang2(ev) {\n    localStorage.setItem('lang', ev);\n    this.setState({\n      lang: ev\n    });\n  }\n\n  handlesubmit(event) {\n    event.preventDefault();\n    console.log(\"ok\");\n    let csrf = cookie.load('csrftoken');\n    var formData = new FormData();\n    formData.append('first_name', this.state.first_name);\n    formData.append('last_name', this.state.last_name);\n    formData.append('email', this.state.email);\n    formData.append('username', this.state.username);\n    console.log('Coming');\n    axios({\n      method: 'POST',\n      url: 'http://127.0.0.1:8000/rtqkaq2345akdker24/',\n      headers: {\n        'content-type': 'application/json',\n        'X-CSRFToken': csrf\n      },\n      data: formData,\n      credentials: 'include'\n    }).then(response => {\n      this.setState({\n        ok: true\n      });\n    }).catch(errors => {\n      console.log(errors);\n\n      if (errors.data.username) {\n        this.setState({\n          username_error: errors.data.username\n        });\n      } else if (errors.data.last_name) {\n        this.setState({\n          last_name_error: errors.data.last_name_error\n        });\n      } else if (errors.data.email) {\n        this.setState({\n          email_error: errors.data.email_error\n        });\n      } else if (errors.data.first_name) {\n        this.setState({\n          first_name_error: errors.data.first_name_error\n        });\n      }\n    });\n  }\n\n  render() {\n    if (this.state.ok) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/profile/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 19\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(I18nProvider, {\n        locale: this.lang1(),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: translate('e_y_profile')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 53\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 58\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: this.handlesubmit,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"name\",\n                children: translate('name')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 22\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                name: \"first_name\",\n                id: \"name\",\n                defaultValue: this.state.first_name,\n                onChange: this.handlefield\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 22\n              }, this), this.state.username_error !== '' ? /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: 'red'\n                },\n                children: this.state.username_error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 58\n              }, this) : '', /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"surname\",\n                children: translate('surname')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 22\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                name: \"last_name\",\n                id: \"surname\",\n                defaultValue: this.state.last_name,\n                onChange: this.handlefield\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 22\n              }, this), this.state.last_name !== '' ? /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: 'red'\n                },\n                children: this.state.last_name_error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 53\n              }, this) : '', /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"username\",\n                children: translate('username')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 22\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                name: \"username\",\n                id: \"username\",\n                defaultValue: this.state.username,\n                onChange: this.handlefield\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 22\n              }, this), this.state.username_error !== '' ? /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: 'red'\n                },\n                children: this.state.username_error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 58\n              }, this) : '', /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"email\",\n                children: translate('email')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 22\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                className: \"form-control\",\n                name: \"email\",\n                id: \"email\",\n                defaultValue: this.state.email,\n                onChange: this.handlefield\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 22\n              }, this), this.state.email_error !== '' ? /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: 'red'\n                },\n                children: this.state.email_error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 55\n              }, this) : '', /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-info\",\n                children: translate('submit')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 22\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 18\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 18\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 22\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }, this);\n    }\n  }\n\n}\n\nexport default ProfileForm;","map":{"version":3,"sources":["C:/For Personal Use/Django Projects/github/django-react/a/reactjs/src/pages/compenents/profile_form.jsx"],"names":["axios","cookie","React","Component","Link","Redirect","Navbar","I18nProvider","LOCALES","translate","ProfileForm","constructor","props","state","username","username_error","first_name","first_name_error","last_name","last_name_error","email","wishlist","cart","ok","handlefield","bind","lang2","handlesubmit","componentDidMount","get","then","response","setState","data","catch","errors","console","log","event","preventDefault","target","name","value","lang1","localStorage","getItem","English","Russian","Uzbek","ev","setItem","lang","csrf","load","formData","FormData","append","method","url","headers","credentials","email_error","render","color"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport cookie from 'react-cookies'\r\nimport React, { Component } from 'react';\r\nimport {\r\n    Link,\r\n    Redirect\r\n  } from \"react-router-dom\";\r\nimport Navbar from './Navbar'\r\nimport { I18nProvider, LOCALES } from '../i18n';\r\nimport translate from '../i18n/tranlate';\r\nclass ProfileForm extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.handlefield = this.handlefield.bind(this);\r\n        this.lang2 = this.lang2.bind(this);\r\n        this.handlesubmit = this.handlesubmit.bind(this);\r\n    }\r\n    state = {\r\n        username:null,\r\n        username_error:'',\r\n        first_name:null,\r\n        first_name_error:'',\r\n        last_name:null,\r\n        last_name_error:'',\r\n        email:null,\r\n        email:'',\r\n        wishlist:0,\r\n        cart:0,\r\n        ok:false  \r\n      }\r\n    componentDidMount(){\r\n        axios.get('http://127.0.0.1:8000/rtqkaq2345akdker24/')\r\n        .then(response =>{\r\n            this.setState({\r\n                username:response.data.username,\r\n                first_name:response.data.first_name,\r\n                last_name:response.data.last_name,\r\n                email:response.data.email\r\n            })\r\n        })\r\n        .catch(errors =>{\r\n            console.log(errors)\r\n        })\r\n        axios.get('http://127.0.0.1:8000/sdlkewrws/')\r\n        .then(response => {\r\n            this.setState({\r\n            cart:response.data.cart,\r\n            wishlist:response.data.wishlist\r\n            })\r\n        })\r\n    }\r\n    handlefield(event){\r\n        event.preventDefault();\r\n        this.setState({\r\n            [event.target.name]:event.target.value\r\n        })\r\n    }\r\n    lang1(){\r\n        if(localStorage.getItem('lang') === 'en'){\r\n            \r\n            return LOCALES.English\r\n        }\r\n        else if(localStorage.getItem('lang')=== 'ru'){\r\n            return LOCALES.Russian \r\n        }\r\n        else if(localStorage.getItem('lang')=== 'uz'){\r\n            return LOCALES.Uzbek\r\n        }\r\n        else{\r\n            console.log(\"Error\")\r\n        }\r\n    }\r\n    lang2(ev){\r\n        localStorage.setItem('lang',ev);\r\n        this.setState({\r\n            lang:ev\r\n        })\r\n    \r\n      }\r\n    handlesubmit(event){\r\n        event.preventDefault();\r\n        console.log(\"ok\")\r\n        let csrf = cookie.load('csrftoken')\r\n        var formData = new FormData()\r\n        formData.append('first_name',this.state.first_name);\r\n        formData.append('last_name',this.state.last_name);\r\n        formData.append('email',this.state.email);\r\n        formData.append('username',this.state.username);\r\n        console.log('Coming')\r\n        axios({\r\n            method:'POST',\r\n            url:'http://127.0.0.1:8000/rtqkaq2345akdker24/',\r\n            headers:{\r\n                'content-type':'application/json',\r\n                'X-CSRFToken':csrf\r\n            },\r\n            data:formData,\r\n            credentials:'include'\r\n        })\r\n        .then(response =>{\r\n            this.setState({\r\n                ok:true\r\n            })\r\n        })\r\n        .catch(errors =>{\r\n            console.log(errors)\r\n            if(errors.data.username)\r\n            {\r\n                this.setState({\r\n                    username_error:errors.data.username\r\n                })\r\n            }\r\n            else if(errors.data.last_name){\r\n                this.setState({\r\n                    last_name_error:errors.data.last_name_error\r\n                })\r\n            }\r\n            else if(errors.data.email){\r\n                this.setState({\r\n                    email_error:errors.data.email_error\r\n                })\r\n            }\r\n            else if(errors.data.first_name){\r\n                this.setState({\r\n                    first_name_error:errors.data.first_name_error\r\n                })\r\n            }\r\n        })\r\n    }\r\n    render() { \r\n       if(this.state.ok)\r\n       {\r\n           return <Redirect to=\"/profile/\" />\r\n       }\r\n       else{\r\n        return ( \r\n            <I18nProvider locale={this.lang1()}>\r\n                     <div>\r\n         \r\n                 <div className=\"container\">\r\n                     \r\n                 <h1>{translate('e_y_profile')}</h1><br/><br/>\r\n                 <form  onSubmit={this.handlesubmit}>\r\n                     <label htmlFor=\"name\">{translate('name')}</label>\r\n                     <input type=\"text\" className=\"form-control\" name=\"first_name\" id=\"name\" defaultValue={this.state.first_name} onChange = {this.handlefield} />\r\n                     {this.state.username_error !== '' ? <div style={{color:'red'}}>{this.state.username_error}</div> : ''}\r\n                     <label htmlFor=\"surname\">{translate('surname')}</label>\r\n                     <input type=\"text\" className=\"form-control\" name=\"last_name\" id=\"surname\" defaultValue={this.state.last_name} onChange={this.handlefield}  />\r\n                     {this.state.last_name !== '' ? <div style={{color:'red'}}>{this.state.last_name_error}</div> : ''}\r\n                     <label htmlFor=\"username\">{translate('username')}</label>\r\n                     <input type=\"text\" className=\"form-control\" name=\"username\" id=\"username\" defaultValue={this.state.username} onChange={this.handlefield} />\r\n                     {this.state.username_error !== '' ? <div style={{color:'red'}}>{this.state.username_error}</div> :''}\r\n                     <label htmlFor=\"email\">{translate('email')}</label>\r\n                     <input type=\"email\" className=\"form-control\" name=\"email\" id=\"email\" defaultValue={this.state.email} onChange={this.handlefield} />\r\n                     {this.state.email_error !== '' ? <div style={{color:'red'}}>{this.state.email_error}</div>:''}\r\n                     <button type='submit' className=\"btn btn-info\">{translate('submit')}</button>\r\n                 </form>\r\n             </div>\r\n            </div>\r\n            </I18nProvider>\r\n          );\r\n       }\r\n    }\r\n}\r\n \r\nexport default ProfileForm;"]},"metadata":{},"sourceType":"module"}