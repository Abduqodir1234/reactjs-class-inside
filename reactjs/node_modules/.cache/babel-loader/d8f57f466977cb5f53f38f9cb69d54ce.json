{"ast":null,"code":"import _defineProperty from\"C:/For Personal Use/Django Projects/github/django-react/a/reactjs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/For Personal Use/Django Projects/github/django-react/a/reactjs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/For Personal Use/Django Projects/github/django-react/a/reactjs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/For Personal Use/Django Projects/github/django-react/a/reactjs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/For Personal Use/Django Projects/github/django-react/a/reactjs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/For Personal Use/Django Projects/github/django-react/a/reactjs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import axios from'axios';import React,{Component}from'react';import cookie from'react-cookies';import{Redirect}from'react-router';import Navbar from'./compenents/Navbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdateProduct=/*#__PURE__*/function(_Component){_inherits(UpdateProduct,_Component);var _super=_createSuper(UpdateProduct);function UpdateProduct(props){var _this;_classCallCheck(this,UpdateProduct);_this=_super.call(this,props);_this.lang2=_this.lang2.bind(_assertThisInitialized(_this));_this.state={name:null,color:null,desc:null,price:null,sale:false,price_in_sale:2,quantity:null,img:undefined,size:null,category:null,brand:null,cart:0,wishlist:0,lang:''};_this.handleForm=_this.handleForm.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.handleFileForm=_this.handleFileForm.bind(_assertThisInitialized(_this));_this.price=_this.price.bind(_assertThisInitialized(_this));_this.clear=_this.clear.bind(_assertThisInitialized(_this));return _this;}_createClass(UpdateProduct,[{key:\"lang2\",value:function lang2(ev){localStorage.setItem('lang',ev);this.setState({lang:ev});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var id=this.props.match.params.id;axios.get('http://127.0.0.1:8000/detail/'+id+'/').then(function(response){_this2.setState({name:response.data.name,color:response.data.color,desc:response.data.desc,price:response.data.price,sale:response.data.sale,price_in_sale:response.data.price_in_sale,quantity:response.data.quantity,img:response.data.img,size:response.data.size,category:response.data.category,brand:response.data.brand});});}},{key:\"handleForm\",value:function handleForm(event){var comp=this;console.log(event.target.name,event.target.value);if(event.target.name==='sale'){if(event.target.checked===true){comp.setState({sale:null});comp.setState({sale:true});console.log(\"Sale:False\");}else{comp.setState({sale:null});comp.setState({sale:false});console.log(\"Sale:True\");}}else{this.setState(_defineProperty({},event.target.name,null));this.setState(_defineProperty({},event.target.name,event.target.value));console.log('not checkbox');}}},{key:\"price\",value:function price(){if(this.state.sale){var _jsx2;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price\",children:\"Price In Sale\"}),/*#__PURE__*/_jsx(\"input\",(_jsx2={type:\"number\",value:\"1\",name:\"price_in_sale\"},_defineProperty(_jsx2,\"value\",this.state.price_in_sale),_defineProperty(_jsx2,\"readOnly\",true),_defineProperty(_jsx2,\"className\",\"form-control\"),_defineProperty(_jsx2,\"onChange\",this.handleForm),_jsx2))]});}}},{key:\"handleSubmit\",value:function handleSubmit(event){var _this3=this;if(this.props.match.params.id){var _id=this.props.match.params.id;}var csrf=cookie.load('csrftoken');var formData=new FormData();console.log(this.state.img);console.log(typeof this.state.img);if(typeof this.state.img!==typeof\"AAAA\"){console.log('Not String');formData.append('img',this.state.img);}formData.append('name',this.state.name);formData.append('color',this.state.color);formData.append('desc',this.state.desc);formData.append('price',this.state.price);formData.append('price_in_sale',this.state.sale?this.state.price_in_sale:2);formData.append('sale',this.state.sale);formData.append('quantity',this.state.quantity);formData.append('size',this.state.size);formData.append('category',this.state.category);formData.append('brand',this.state.brand);event.preventDefault();console.log(formData);axios({method:'PUT',url:'http://127.0.0.1:8000/detail/'+id+'/',headers:{\"Content-Type\":\"multipart/form-data\",'X-CSRFToken':csrf},data:formData,credentials:'include'}).catch(function(errors){console.log(errors);});axios.get('http://127.0.0.1:8000/sdlkewrws/').then(function(response){_this3.setState({cart:response.data.cart,wishlist:response.data.wishlist});});this.clear();this.componentDidMount();}},{key:\"clear\",value:function clear(){this.ppp.reset();}},{key:\"handleFileForm\",value:function handleFileForm(event){var _this4=this;event.preventDefault();var files=event.target.files;this.setState({img:files[0]},function(){return console.log(_this4.state);});}},{key:\"count\",value:function count(){var _this5=this;axios.get('http://127.0.0.1:8000/sdlkewrws/').then(function(response){_this5.setState({cart:response.data.cart,wishlist:response.data.wishlist});});}},{key:\"render\",value:function render(){var _this6=this;if(this.props.state.user===\"False\"){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}else{return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,className:\"container\",ref:function ref(el){return _this6.ppp=el;},encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Product Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",defaultValue:this.state.name,name:\"name\",className:\"form-control\",onChange:this.handleForm,required:\"required\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"quantity\",children:\"Quantity\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"quantity\",defaultValue:this.state.quantity,className:\"form-control\",name:\"quantity\",required:\"required\",onChange:this.handleForm}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"price\",name:\"price\",defaultValue:this.state.price,readOnly:true,className:\"form-control\",onChange:this.handleForm}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-control custom-checkbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"custom-control-input\",id:\"customCheck\",name:\"sale\",checked:this.state.sale,onChange:this.handleForm}),/*#__PURE__*/_jsx(\"label\",{className:\"custom-control-label\",htmlFor:\"customCheck\",children:\" Sale\"})]}),this.price(),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"img\",children:\"Main Image of Product: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"img\",accept:\".jpg,.png,.svg\",defaultValue:this.state.img,onChange:this.handleFileForm}),\" \",/*#__PURE__*/_jsx(\"label\",{onClick:this.handleSubmit,className:\"btn btn-sm btn-info\",children:\"Preview\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\" \",/*#__PURE__*/_jsx(\"img\",{src:this.state.img,width:\"100px\",height:\"100px\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"size\",children:\"Available sizes\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"size\",className:\"form-control\",defaultValue:this.state.size,onChange:this.handleForm}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"color\",children:\"Color of Product\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"color\",className:\"form-control\",defaultValue:this.state.color,onChange:this.handleForm}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"desc\",children:\"Full Description\"}),/*#__PURE__*/_jsx(\"textarea\",{cols:\"30\",rows:\"10\",name:\"desc\",defaultValue:this.state.desc,className:\"form-control\",onChange:this.handleForm}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",children:\"Category\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"category\",defaultValue:this.state.category,class:\"custom-select mb-3\",onChange:this.handleForm,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Fashion & Beauty\",children:\"Fashion & Beauty\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Kids & Babies Clothes\",children:\"Kids & Babies Clothes\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Men & Women  Clothes\",children:\"Men & Women  Clothes\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Gadgets & Accessories\",children:\"Gadgets & Accessories\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Electronics & Accessories\",children:\"Electronics & Accessories\"})]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"brand\",children:\"Brand\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"brand\",defaultValue:this.state.brand,className:\"form-control\",onChange:this.handleForm}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"input\",{type:\"submit\",onClick:this.handleSubmit,className:\"btn btn-info\"})]})})});}}}]);return UpdateProduct;}(Component);export default UpdateProduct;","map":{"version":3,"sources":["C:/For Personal Use/Django Projects/github/django-react/a/reactjs/src/pages/updateproduct.jsx"],"names":["axios","React","Component","cookie","Redirect","Navbar","UpdateProduct","props","lang2","bind","state","name","color","desc","price","sale","price_in_sale","quantity","img","undefined","size","category","brand","cart","wishlist","lang","handleForm","handleSubmit","handleFileForm","clear","ev","localStorage","setItem","setState","id","match","params","get","then","response","data","event","comp","console","log","target","value","checked","csrf","load","formData","FormData","append","preventDefault","method","url","headers","credentials","catch","errors","componentDidMount","ppp","reset","files","user","el"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, { Component } from 'react';\r\nimport cookie from 'react-cookies'\r\nimport { Redirect } from 'react-router';\r\nimport Navbar from './compenents/Navbar';\r\n\r\nclass UpdateProduct extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.lang2 = this.lang2.bind(this)\r\n        this.state = {\r\n            name: null,\r\n            color: null,\r\n            desc: null,\r\n            price: null,\r\n            sale: false,\r\n            price_in_sale: 2,\r\n            quantity: null,\r\n            img: undefined,\r\n            size: null,\r\n            category: null,\r\n            brand: null,\r\n            cart: 0,\r\n            wishlist: 0,\r\n            lang: ''\r\n        }\r\n        this.handleForm = this.handleForm.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleFileForm = this.handleFileForm.bind(this);\r\n        this.price = this.price.bind(this)\r\n        this.clear = this.clear.bind(this)\r\n    }\r\n    lang2(ev) {\r\n        localStorage.setItem('lang', ev);\r\n        this.setState({\r\n            lang: ev\r\n        })\r\n\r\n    }\r\n    componentDidMount() {\r\n        const { id } = this.props.match.params;\r\n        axios.get('http://127.0.0.1:8000/detail/' + id + '/')\r\n            .then(response => {\r\n                this.setState({\r\n                    name: response.data.name,\r\n                    color: response.data.color,\r\n                    desc: response.data.desc,\r\n                    price: response.data.price,\r\n                    sale: response.data.sale,\r\n                    price_in_sale: response.data.price_in_sale,\r\n                    quantity: response.data.quantity,\r\n                    img: response.data.img,\r\n                    size: response.data.size,\r\n                    category: response.data.category,\r\n                    brand: response.data.brand,\r\n                })\r\n            })\r\n    }\r\n    handleForm(event) {\r\n        let comp = this;\r\n        console.log(event.target.name, event.target.value)\r\n        if (event.target.name === 'sale') {\r\n            if (event.target.checked === true) {\r\n                comp.setState({\r\n                    sale: null\r\n                })\r\n                comp.setState({\r\n                    sale: true\r\n                })\r\n                console.log(\"Sale:False\")\r\n            }\r\n            else {\r\n                comp.setState({\r\n                    sale: null\r\n                })\r\n                comp.setState({\r\n                    sale: false\r\n                })\r\n                console.log(\"Sale:True\")\r\n            }\r\n        }\r\n        else {\r\n            this.setState({\r\n                [event.target.name]: null\r\n            })\r\n            this.setState({\r\n                [event.target.name]: event.target.value,\r\n            })\r\n            console.log('not checkbox')\r\n        }\r\n\r\n\r\n    }\r\n    price() {\r\n        if (this.state.sale) {\r\n            return (<div>\r\n                <label htmlFor=\"price\">Price In Sale</label>\r\n                <input type=\"number\" value='1' name=\"price_in_sale\" value={this.state.price_in_sale} readOnly className='form-control' onChange={this.handleForm} />\r\n            </div>)\r\n        }\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        if (this.props.match.params.id) {\r\n            let id = this.props.match.params.id;\r\n        }\r\n        let csrf = cookie.load('csrftoken');\r\n        var formData = new FormData();\r\n        console.log(this.state.img)\r\n        console.log(typeof (this.state.img))\r\n        if (typeof (this.state.img) !== typeof (\"AAAA\")) {\r\n            console.log('Not String')\r\n            formData.append('img', this.state.img)\r\n        }\r\n        formData.append('name', this.state.name)\r\n        formData.append('color', this.state.color)\r\n        formData.append('desc', this.state.desc)\r\n        formData.append('price', this.state.price)\r\n        formData.append('price_in_sale', this.state.sale ? this.state.price_in_sale : 2)\r\n        formData.append('sale', this.state.sale)\r\n        formData.append('quantity', this.state.quantity)\r\n        formData.append('size', this.state.size)\r\n        formData.append('category', this.state.category)\r\n        formData.append('brand', this.state.brand)\r\n        event.preventDefault();\r\n        console.log(formData)\r\n        axios({\r\n            method: 'PUT',\r\n            url: 'http://127.0.0.1:8000/detail/' + id + '/',\r\n            headers: {\r\n                \"Content-Type\": \"multipart/form-data\",\r\n                'X-CSRFToken': csrf\r\n            },\r\n            data: formData,\r\n            credentials: 'include'\r\n        })\r\n            .catch(errors => {\r\n                console.log(errors)\r\n            })\r\n        axios.get('http://127.0.0.1:8000/sdlkewrws/')\r\n            .then(response => {\r\n                this.setState({\r\n                    cart: response.data.cart,\r\n                    wishlist: response.data.wishlist\r\n                })\r\n            })\r\n        this.clear()\r\n        this.componentDidMount()\r\n    }\r\n    clear() {\r\n        this.ppp.reset();\r\n    }\r\n    handleFileForm(event) {\r\n        event.preventDefault();\r\n        let files = event.target.files;\r\n        this.setState({\r\n            img: files[0]\r\n        }, () => console.log(this.state));\r\n    }\r\n    count() {\r\n        axios.get('http://127.0.0.1:8000/sdlkewrws/')\r\n            .then(response => {\r\n                this.setState({\r\n                    cart: response.data.cart,\r\n                    wishlist: response.data.wishlist\r\n                })\r\n            })\r\n    }\r\n    render() {\r\n        if (this.props.state.user === \"False\") {\r\n            return <Redirect to=\"/\" />\r\n        }\r\n        else {\r\n            return (\r\n                <div>\r\n\r\n                    <div className='container'>\r\n                        <form onSubmit={this.handleSubmit} className='container' ref={(el) => this.ppp = el} encType=\"multipart/form-data\">\r\n                            <label htmlFor='name'>Product Name</label>\r\n                            <input type=\"text\" id='name' defaultValue={this.state.name} name=\"name\" className='form-control' onChange={this.handleForm} required='required' />\r\n                            <label htmlFor=\"quantity\">Quantity</label>\r\n                            <input type=\"number\" id='quantity' defaultValue={this.state.quantity} className='form-control' name=\"quantity\" required='required' onChange={this.handleForm} />\r\n                            <label htmlFor=\"price\">Price</label>\r\n                            <input type=\"number\" id='price' name=\"price\" defaultValue={this.state.price} readOnly className='form-control' onChange={this.handleForm} />\r\n                            <div className=\"custom-control custom-checkbox\">\r\n                                <input type=\"checkbox\" className=\"custom-control-input\" id=\"customCheck\" name=\"sale\" checked={this.state.sale} onChange={this.handleForm} />\r\n                                <label className=\"custom-control-label\" htmlFor=\"customCheck\"> Sale</label>\r\n                            </div>\r\n                            {this.price()}\r\n                            <label htmlFor=\"img\">Main Image of Product: </label>\r\n                            <input type=\"file\" name='img' accept='.jpg,.png,.svg' defaultValue={this.state.img} onChange={this.handleFileForm} /> <label onClick={this.handleSubmit} className='btn btn-sm btn-info'>Preview</label> <br />\r\n                            <label> <img src={this.state.img} width='100px' height='100px' /></label><br />\r\n                            <label htmlFor=\"size\">Available sizes</label>\r\n                            <input type=\"text\" name=\"size\" className='form-control' defaultValue={this.state.size} onChange={this.handleForm} />\r\n                            <label htmlFor=\"color\">Color of Product</label>\r\n                            <input type=\"text\" name=\"color\" className='form-control' defaultValue={this.state.color} onChange={this.handleForm} />\r\n                            <label htmlFor=\"desc\">Full Description</label>\r\n                            <textarea cols=\"30\" rows=\"10\" name=\"desc\" defaultValue={this.state.desc} className='form-control' onChange={this.handleForm}></textarea>\r\n                            <label htmlFor=\"category\">Category</label>\r\n                            <select name=\"category\" defaultValue={this.state.category} class=\"custom-select mb-3\" onChange={this.handleForm}>\r\n                                <option value=\"Fashion & Beauty\">Fashion & Beauty</option>\r\n                                <option value=\"Kids & Babies Clothes\">Kids & Babies Clothes</option>\r\n                                <option value=\"Men & Women  Clothes\">Men & Women  Clothes</option>\r\n                                <option value=\"Gadgets & Accessories\">Gadgets & Accessories</option>\r\n                                <option value=\"Electronics & Accessories\">Electronics & Accessories</option>\r\n                            </select>\r\n                            <label htmlFor=\"brand\">Brand</label>\r\n                            <input type=\"text\" name=\"brand\" defaultValue={this.state.brand} className='form-control' onChange={this.handleForm} />\r\n                            <br /><br /> <input type=\"submit\" onClick={this.handleSubmit} className=\"btn btn-info\" />\r\n\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default UpdateProduct;"]},"metadata":{},"sourceType":"module"}