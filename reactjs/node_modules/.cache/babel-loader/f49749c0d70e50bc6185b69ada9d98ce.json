{"ast":null,"code":"import _defineProperty from\"C:/For Personal Use/Django Projects/github/django-react/a/reactjs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/For Personal Use/Django Projects/github/django-react/a/reactjs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/For Personal Use/Django Projects/github/django-react/a/reactjs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from'axios';import React,{useEffect,useState}from'react';import cookie from'react-cookies';import{FormattedMessage}from'react-intl';import{Redirect,useParams}from'react-router-dom';import{I18nProvider,LOCALES}from'./i18n';import translate from'./i18n/tranlate';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdateProduct=function UpdateProduct(props){var _useState=useState({name:null,color:null,desc:null,price:null,sale:false,price_in_sale:2,quantity:null,img:undefined,size:null,category:null,brand:null,cart:0,wishlist:0,lang:''}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),redirect=_useState4[0],setredirect=_useState4[1];var _useParams=useParams(),id=_useParams.id;useEffect(function(){axios.get('http://127.0.0.1:8000/detail/'+id+'/').then(function(response){setState({name:response.data.name,color:response.data.color,desc:response.data.desc,price:response.data.price,sale:response.data.sale,price_in_sale:response.data.price_in_sale,quantity:response.data.quantity,img:response.data.img,size:response.data.size,category:response.data.category,brand:response.data.brand});});},[]);console.log('Reloaded');var lang1=function lang1(){if(localStorage.getItem('lang')==='en'){return LOCALES.English;}else if(localStorage.getItem('lang')==='ru'){return LOCALES.Russian;}else if(localStorage.getItem('lang')==='uz'){return LOCALES.Uzbek;}};var handleForm=function handleForm(event){if(event.target.name==='sale'){if(event.target.checked===true){setState(_objectSpread(_objectSpread({},state),{},{sale:null}));setState(_objectSpread(_objectSpread({},state),{},{sale:true}));}else{setState(_objectSpread(_objectSpread({},state),{},{sale:null}));setState(_objectSpread(_objectSpread({},state),{},{sale:false}));}}else{setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},event.target.name,event.target.value)));}};var price=function price(){if(state.sale){var _jsx2;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price_in_sale\",children:\"Price In Sale\"}),/*#__PURE__*/_jsx(\"input\",(_jsx2={type:\"number\",value:\"1\",name:\"price_in_sale\"},_defineProperty(_jsx2,\"value\",state.price_in_sale),_defineProperty(_jsx2,\"readOnly\",true),_defineProperty(_jsx2,\"className\",\"form-control\"),_defineProperty(_jsx2,\"onChange\",handleForm),_jsx2))]});}};var handleSubmit=function handleSubmit(event){event.preventDefault();console.log(id);var csrf=cookie.load('csrftoken');var formData=new FormData();formData.append('name',state.name);formData.append('color',state.color);formData.append('desc',state.desc);formData.append('price',state.price);formData.append('price_in_sale',state.sale?state.price_in_sale:2);formData.append('sale',state.sale);formData.append('quantity',state.quantity);formData.append('size',state.size);formData.append('category',state.category);formData.append('brand',state.brand);if(typeof state.img!==typeof\"zxcsdfasd\"){console.log('Not string');formData.append('img',state.img);}event.preventDefault();axios({method:'PUT',url:'http://127.0.0.1:8000/detail/'+id+'/',headers:{\"Content-Type\":\"multipart/form-data\",'X-CSRFToken':csrf},data:formData,credentials:'include'}).then(function(response){console.log(response);setredirect(true);});axios.get('http://127.0.0.1:8000/sdlkewrws/').then(function(response){setState(_objectSpread(_objectSpread({},state),{},{cart:response.data.cart,wishlist:response.data.wishlist}));});};var handleFileForm=function handleFileForm(event){event.preventDefault();var files=event.target.files;setState({lang:'asdasdf'});setState(_objectSpread(_objectSpread({},state),{},{img:files[0]}));console.log(state.img);};if(props.user==='False'){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}else{if(redirect){return/*#__PURE__*/_jsx(Redirect,{to:\"/announcement/\"});}else{return/*#__PURE__*/_jsx(I18nProvider,{locale:lang1(),children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"container\",encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:translate('p_name')}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",defaultValue:state.name,name:\"name\",className:\"form-control\",onChange:handleForm,required:\"required\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"quantity\",children:translate('quantity')}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"quantity\",defaultValue:state.quantity,className:\"form-control\",name:\"quantity\",required:\"required\",onChange:handleForm}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price\",children:translate('price')}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"price\",name:\"price\",defaultValue:state.price,readOnly:true,className:\"form-control\",onChange:handleForm}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-control custom-checkbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"custom-control-input\",id:\"customCheck\",name:\"sale\",checked:state.sale,onChange:handleForm}),/*#__PURE__*/_jsxs(\"label\",{className:\"custom-control-label\",htmlFor:\"customCheck\",children:[\" \",translate('sale')]})]}),price(),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"img\",children:translate('main_image')}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"img\",accept:\".jpg,.png,.svg\",defaultValue:state.img,onChange:handleFileForm}),\" \",/*#__PURE__*/_jsx(\"label\",{onClick:handleSubmit,className:\"btn btn-sm btn-info\",children:\"Preview\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\" \",/*#__PURE__*/_jsx(\"img\",{src:state.img,width:\"100px\",height:\"100px\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"size\",children:translate('size')}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"size\",className:\"form-control\",defaultValue:state.size,onChange:handleForm}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"color\",children:translate('a_color')}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"color\",className:\"form-control\",defaultValue:state.color,onChange:handleForm}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"desc\",children:translate('desc')}),/*#__PURE__*/_jsx(\"textarea\",{cols:\"30\",rows:\"10\",name:\"desc\",defaultValue:state.desc,className:\"form-control\",onChange:handleForm}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",children:translate('category')}),/*#__PURE__*/_jsxs(\"select\",{name:\"category\",value:state.category,class:\"custom-select mb-3\",onChange:handleForm,children:[/*#__PURE__*/_jsx(FormattedMessage,{id:\"c_1\",defaultMessage:\"Fashion & Beauty\",children:function children(value1){return/*#__PURE__*/_jsx(\"option\",{selected:true,value:\"Fashion & Beauty\",children:value1});}}),\"(\",/*#__PURE__*/_jsx(FormattedMessage,{id:\"c_1\",defaultMessage:\"Fashion & Beauty\",children:function children(value1){return/*#__PURE__*/_jsx(\"option\",{value:\"Fashion & Beauty\",children:value1});}}),/*#__PURE__*/_jsx(FormattedMessage,{id:\"c_2\",defaultMessage:\"Kids & Babies Clothes\",children:function children(value2){return/*#__PURE__*/_jsx(\"option\",{value:\"Kids & Babies Clothes\",children:value2});}}),/*#__PURE__*/_jsx(FormattedMessage,{id:\"c_3\",defaultMessage:\"Men & Women  Clothes\",children:function children(value3){return/*#__PURE__*/_jsx(\"option\",{value:\"Men & Women  Clothes\",children:value3});}}),/*#__PURE__*/_jsx(FormattedMessage,{id:\"c_4\",defaultMessage:\"Gadgets & Accessories\",children:function children(value4){return/*#__PURE__*/_jsx(\"option\",{value:\"Gadgets & Accessories\",children:value4});}}),/*#__PURE__*/_jsx(FormattedMessage,{id:\"c_5\",defaultMessage:\"Electronics & Accessories\",children:function children(value5){return/*#__PURE__*/_jsx(\"option\",{value:\"Electronics & Accessories\",children:value5});}})]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"brand\",children:translate('brand')}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"brand\",defaultValue:state.brand,className:\"form-control\",onChange:handleForm}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"input\",{type:\"submit\",onClick:handleSubmit,className:\"btn btn-info\"})]})})});}}};export default UpdateProduct;","map":{"version":3,"sources":["C:/For Personal Use/Django Projects/github/django-react/a/reactjs/src/pages/updateproduct.jsx"],"names":["axios","React","useEffect","useState","cookie","FormattedMessage","Redirect","useParams","I18nProvider","LOCALES","translate","UpdateProduct","props","name","color","desc","price","sale","price_in_sale","quantity","img","undefined","size","category","brand","cart","wishlist","lang","state","setState","redirect","setredirect","id","get","then","response","data","console","log","lang1","localStorage","getItem","English","Russian","Uzbek","handleForm","event","target","checked","value","handleSubmit","preventDefault","csrf","load","formData","FormData","append","method","url","headers","credentials","handleFileForm","files","user","value1","value2","value3","value4","value5"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react';\r\nimport cookie from 'react-cookies'\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { Redirect,useParams} from 'react-router-dom';\r\nimport { I18nProvider, LOCALES } from './i18n';\r\nimport translate from './i18n/tranlate';\r\nconst UpdateProduct = props => {\r\n    const [state,setState] = useState({\r\n            name:null,\r\n            color:null,\r\n            desc:null,\r\n            price:null,\r\n            sale:false,\r\n            price_in_sale:2,\r\n            quantity:null,\r\n            img:undefined,\r\n            size:null,\r\n            category:null,\r\n            brand:null,\r\n            cart:0,\r\n            wishlist:0,\r\n            lang:''\r\n    })\r\n    const [redirect,setredirect] = useState(false)\r\n    const { id } = useParams();\r\n      useEffect(()=>{\r\n\r\n        axios.get('http://127.0.0.1:8000/detail/' + id + '/')\r\n        .then(response => {\r\n            setState({\r\n                name :response.data.name,\r\n                color :response.data.color,\r\n                desc :response.data.desc,\r\n                price :response.data.price,\r\n                sale :response.data.sale,\r\n                price_in_sale :response.data.price_in_sale,\r\n                quantity :response.data.quantity,\r\n                img :response.data.img,\r\n                size :response.data.size,\r\n                category :response.data.category,\r\n                brand :response.data.brand,\r\n            })\r\n        })\r\n      },[])\r\n    \r\n    console.log('Reloaded')\r\n    const lang1 = () => {\r\n        if(localStorage.getItem('lang') === 'en'){\r\n            return LOCALES.English\r\n        }\r\n        else if(localStorage.getItem('lang')=== 'ru'){\r\n            return LOCALES.Russian \r\n        }\r\n        else if(localStorage.getItem('lang')=== 'uz'){\r\n            return LOCALES.Uzbek\r\n        }\r\n    }\r\n    const handleForm = (event) =>{\r\n        if(event.target.name === 'sale'){\r\n            if(event.target.checked === true)\r\n            {\r\n                setState({...state,\r\n                    sale:null\r\n                })\r\n                setState({...state,\r\n                    sale:true\r\n                })\r\n              \r\n            }\r\n            else{\r\n                setState({...state,\r\n                    sale:null\r\n                })\r\n                setState({...state,\r\n                    sale:false\r\n                   })\r\n               \r\n            }\r\n        }\r\n        else{\r\n            setState({...state,\r\n                [event.target.name]:event.target.value,\r\n            })\r\n           \r\n        }\r\n\r\n\r\n    }\r\n    const price = () => {\r\n        if(state.sale)\r\n        {\r\n            return ( <div>\r\n                 <label htmlFor=\"price_in_sale\">Price In Sale</label>\r\n                <input type=\"number\" value='1' name=\"price_in_sale\" value={state.price_in_sale} readOnly className='form-control' onChange={handleForm} />\r\n            </div> )\r\n        }\r\n    }\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        console.log(id)\r\n        let csrf = cookie.load('csrftoken');\r\n        var formData = new FormData();\r\n        formData.append('name', state.name)\r\n        formData.append('color', state.color)\r\n        formData.append('desc', state.desc)\r\n        formData.append('price', state.price)\r\n        formData.append('price_in_sale', state.sale ? state.price_in_sale : 2)\r\n        formData.append('sale', state.sale)\r\n        formData.append('quantity', state.quantity)\r\n        formData.append('size', state.size)\r\n        formData.append('category', state.category)\r\n        formData.append('brand', state.brand)\r\n        if(typeof(state.img)!== typeof(\"zxcsdfasd\")){\r\n            console.log('Not string')\r\n            formData.append('img', state.img)\r\n        }\r\n        event.preventDefault();\r\n        axios({\r\n            method:'PUT',\r\n            url:'http://127.0.0.1:8000/detail/' + id + '/',\r\n            headers:{\r\n                \"Content-Type\": \"multipart/form-data\",\r\n                'X-CSRFToken':csrf\r\n            },\r\n            data:formData,\r\n            credentials:'include'\r\n        })\r\n        .then(response =>{\r\n            console.log(response)\r\n            setredirect(true)\r\n        })\r\n        axios.get('http://127.0.0.1:8000/sdlkewrws/')\r\n        .then(response => {\r\n            setState({...state,\r\n            cart:response.data.cart,\r\n            wishlist:response.data.wishlist\r\n            })\r\n            \r\n        })\r\n    }\r\n    const handleFileForm = (event)  => \r\n    {\r\n        event.preventDefault();\r\n        let files = event.target.files;\r\n        setState({\r\n            lang:'asdasdf'\r\n        })\r\n        setState({...state,\r\n            img: files[0]\r\n        });\r\n        console.log(state.img)\r\n    }\r\n        if(props.user === 'False'){\r\n            return <Redirect to='/' />\r\n        }\r\n        else{\r\n            if(redirect){\r\n                return <Redirect to=\"/announcement/\" />\r\n            }\r\n            else{\r\n                return ( \r\n                    <I18nProvider locale={lang1()}>\r\n                     <div className='container'>\r\n                        <form  onSubmit={handleSubmit} className='container' encType=\"multipart/form-data\">\r\n                             <label htmlFor='name'>{translate('p_name')}</label>\r\n                             <input type=\"text\" id='name' defaultValue={state.name}  name=\"name\" className='form-control' onChange={handleForm} required='required' />\r\n                             <label htmlFor=\"quantity\">{translate('quantity')}</label>\r\n                             <input type=\"number\" id='quantity' defaultValue={state.quantity} className='form-control' name=\"quantity\" required='required' onChange={handleForm}/>\r\n                             <label htmlFor=\"price\">{translate('price')}</label>\r\n                             <input type=\"number\" id='price' name=\"price\" defaultValue={state.price} readOnly className='form-control' onChange={handleForm} />\r\n                             <div className=\"custom-control custom-checkbox\">\r\n                                 <input type=\"checkbox\" className=\"custom-control-input\" id=\"customCheck\" name=\"sale\" checked={state.sale} onChange={handleForm} />\r\n                                 <label className=\"custom-control-label\" htmlFor=\"customCheck\"> {translate('sale')}</label>\r\n                             </div>\r\n                             {price()}\r\n                             <label htmlFor=\"img\">{translate('main_image')}</label> \r\n                             <input type=\"file\" name='img' accept='.jpg,.png,.svg'  defaultValue={state.img}  onChange={handleFileForm}/> <label onClick={handleSubmit} className='btn btn-sm btn-info'>Preview</label> <br/>\r\n                              <label> <img src={state.img} width='100px' height='100px' /></label><br/>\r\n                             <label htmlFor=\"size\">{translate('size')}</label>\r\n                             <input type=\"text\"  name=\"size\" className='form-control' defaultValue={state.size} onChange={handleForm} />\r\n                             <label htmlFor=\"color\">{translate('a_color')}</label>\r\n                             <input type=\"text\"  name=\"color\" className='form-control' defaultValue={state.color} onChange={handleForm} />\r\n                             <label htmlFor=\"desc\">{translate('desc')}</label>\r\n                             <textarea  cols=\"30\" rows=\"10\" name=\"desc\" defaultValue={state.desc} className='form-control' onChange={handleForm}></textarea>\r\n                             <label htmlFor=\"category\">{translate('category')}</label>\r\n                             <select name=\"category\" value={state.category} class=\"custom-select mb-3\" onChange={handleForm}>\r\n                            <FormattedMessage id='c_1' defaultMessage='Fashion & Beauty'>\r\n                                     {value1 =>(\r\n                                         <option selected  value=\"Fashion & Beauty\">{value1}</option>\r\n                                     )}\r\n                            </FormattedMessage>\r\n                           \r\n                            (<FormattedMessage id='c_1' defaultMessage='Fashion & Beauty'>\r\n                                     {value1 =>(\r\n                                         <option  value=\"Fashion & Beauty\">{value1}</option>\r\n                                     )}\r\n                            </FormattedMessage>                        \r\n                                 <FormattedMessage id='c_2' defaultMessage='Kids & Babies Clothes'>\r\n                                     {value2 =>(\r\n                                         <option value=\"Kids & Babies Clothes\">{value2}</option>\r\n                                     )}\r\n                                 </FormattedMessage>\r\n                                 <FormattedMessage id='c_3' defaultMessage='Men & Women  Clothes'>\r\n                                     {value3 =>(\r\n                                         <option value=\"Men & Women  Clothes\">{value3}</option>\r\n                                     )}\r\n                                 </FormattedMessage>\r\n                                 <FormattedMessage id='c_4' defaultMessage='Gadgets & Accessories'>\r\n                                     {value4 =>(\r\n                                         <option value=\"Gadgets & Accessories\">{value4}</option>\r\n                                     )}\r\n                                 </FormattedMessage>\r\n                                 <FormattedMessage id='c_5' defaultMessage='Electronics & Accessories'>\r\n                                     {value5 =>(\r\n                                         <option value=\"Electronics & Accessories\">{value5}</option>\r\n                                     )}\r\n                                 </FormattedMessage>\r\n                             </select>\r\n                             <label htmlFor=\"brand\">{translate('brand')}</label>\r\n                             <input type=\"text\" name=\"brand\" defaultValue={state.brand} className='form-control' onChange={handleForm}  />\r\n                            <br/><br/> <input type=\"submit\" onClick={handleSubmit} className=\"btn btn-info\" />\r\n         \r\n                         </form>\r\n                     </div>\r\n                    </I18nProvider>\r\n                  );\r\n            }\r\n        }\r\n    }\r\n\r\nexport default UpdateProduct;"]},"metadata":{},"sourceType":"module"}