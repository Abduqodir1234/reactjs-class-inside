{"ast":null,"code":"import _defineProperty from\"C:/For Personal Use/Django Projects/github/django-react/a/reactjs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/For Personal Use/Django Projects/github/django-react/a/reactjs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/For Personal Use/Django Projects/github/django-react/a/reactjs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/For Personal Use/Django Projects/github/django-react/a/reactjs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/For Personal Use/Django Projects/github/django-react/a/reactjs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/For Personal Use/Django Projects/github/django-react/a/reactjs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import cookie from'react-cookies';import Navbar from'./compenents/Navbar';import{Redirect}from'react-router';import{I18nProvider,LOCALES}from'./i18n';import translate from'./i18n/tranlate';import{FormattedMessage}from'react-intl';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.state={username:null,password:undefined,success:'',login:false,lang:''};_this.empty=function(){setTimeout(function(){_this.setState({success:''});},15000);};_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.handlefield=_this.handlefield.bind(_assertThisInitialized(_this));_this.clearform=_this.clearform.bind(_assertThisInitialized(_this));_this.clearform=_this.clearform.bind(_assertThisInitialized(_this));_this.lang2=_this.lang2.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios({method:'POST',url:'http://127.0.0.1:8000/check_l/',headers:{'Content-Type':'application/json'},credentials:'include'}).then(function(response){_this2.setState({login:response.data});});axios.get('http://127.0.0.1:8000/sdlkewrws/').then(function(response){_this2.setState({cart:response.data.cart,wishlist:response.data.wishlist});});}},{key:\"clearform\",value:function clearform(){this.PostCreateForm.reset();}},{key:\"handleSubmit\",value:function handleSubmit(event){var _this3=this;event.preventDefault();var csrf=cookie.load('csrftoken');var comp=this;var formData=new FormData();formData.append('username',this.state.username);formData.append('password',this.state.password);axios({method:'POST',url:'http://127.0.0.1:8000/sadfasd/',headers:{'Content-Type':'application/json','X-CSRFToken':csrf},data:formData,credentials:'include'}).then(function(response){console.log(response);if(response.data==='True'){comp.setState({login:true});_this3.props.count();_this3.props.mount();}else{comp.setState({success:response.data});}}).catch(function(errors){console.log(errors,\"Erzrp\");comp.setState({success:\"Something Went Wrong!\"});});this.clearform();}},{key:\"lang2\",value:function lang2(ev){localStorage.setItem('lang',ev);this.setState({lang:ev});}},{key:\"handlefield\",value:function handlefield(event){event.preventDefault();this.setState(_defineProperty({},event.target.name,event.target.value));}},{key:\"lang1\",value:function lang1(){if(localStorage.getItem('lang')==='en'){return LOCALES.English;}else if(localStorage.getItem('lang')==='ru'){return LOCALES.Russian;}else if(localStorage.getItem('lang')==='uz'){return LOCALES.Uzbek;}else{return LOCALES.Uzbek;}}},{key:\"render\",value:function render(){var _this4=this;var csrf=cookie.load('csrftoken');if(this.state.login){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}else{return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(I18nProvider,{locale:this.lang1(),children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,ref:function ref(el){return _this4.PostCreateForm=el;},className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:translate('login')}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[this.state.success!==''?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:this.state.success}):this.empty(),\"   \"]}),/*#__PURE__*/_jsx(\"label\",{children:translate('username')}),/*#__PURE__*/_jsx(FormattedMessage,{id:\"username\",defaultMessage:\"Sizning foydalanuvchi nomingiz\",children:function children(placeholder3){return/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",placeholder:placeholder3,type:\"text\",name:\"username\",id:\"\",onChange:_this4.handlefield,required:\"required\"});}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:translate('password')}),/*#__PURE__*/_jsx(FormattedMessage,{id:\"password\",defaultMessage:\"Sizning ismingiz\",children:function children(placeholder4){return/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"password\",placeholder:placeholder4,name:\"password\",onChange:_this4.handlefield,required:\"required\"});}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-info\",children:translate('submit')})]})})});}}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["C:/For Personal Use/Django Projects/github/django-react/a/reactjs/src/pages/login.jsx"],"names":["React","Component","axios","cookie","Navbar","Redirect","I18nProvider","LOCALES","translate","FormattedMessage","Login","props","state","username","password","undefined","success","login","lang","empty","setTimeout","setState","handleSubmit","bind","handlefield","clearform","lang2","method","url","headers","credentials","then","response","data","get","cart","wishlist","PostCreateForm","reset","event","preventDefault","csrf","load","comp","formData","FormData","append","console","log","count","mount","catch","errors","ev","localStorage","setItem","target","name","value","getItem","English","Russian","Uzbek","lang1","el","placeholder3","placeholder4"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios'\r\nimport cookie from 'react-cookies'\r\nimport Navbar from './compenents/Navbar'\r\nimport { Redirect } from 'react-router';\r\nimport { I18nProvider, LOCALES } from './i18n';\r\nimport translate from './i18n/tranlate';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nclass Login extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handlefield = this.handlefield.bind(this);\r\n        this.clearform = this.clearform.bind(this);\r\n        this.clearform = this.clearform.bind(this);\r\n        this.lang2 = this.lang2.bind(this)\r\n    }\r\n    state = {\r\n        username: null,\r\n        password: undefined,\r\n        success: '',\r\n        login: false,\r\n        lang: ''\r\n    }\r\n    componentDidMount() {\r\n\r\n        axios({\r\n            method: 'POST',\r\n            url: 'http://127.0.0.1:8000/check_l/',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n\r\n            },\r\n            credentials: 'include'\r\n        })\r\n            .then(response => {\r\n                this.setState({\r\n                    login: response.data\r\n                })\r\n            })\r\n        axios.get('http://127.0.0.1:8000/sdlkewrws/')\r\n            .then(response => {\r\n                this.setState({\r\n                    cart: response.data.cart,\r\n                    wishlist: response.data.wishlist\r\n                })\r\n            })\r\n    }\r\n    empty = () => {\r\n        setTimeout(() => {\r\n            this.setState({\r\n                success: ''\r\n            })\r\n        }, 15000);\r\n    }\r\n    clearform() {\r\n        this.PostCreateForm.reset();\r\n    }\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        let csrf = cookie.load('csrftoken')\r\n        let comp = this;\r\n        var formData = new FormData()\r\n        formData.append('username', this.state.username);\r\n        formData.append('password', this.state.password);\r\n        axios({\r\n            method: 'POST',\r\n            url: 'http://127.0.0.1:8000/sadfasd/',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'X-CSRFToken': csrf\r\n            },\r\n            data: formData,\r\n            credentials: 'include'\r\n        })\r\n            .then(response => {\r\n                console.log(response)\r\n                if (response.data === 'True') {\r\n                    comp.setState({\r\n                        login: true\r\n                    })\r\n                    this.props.count();\r\n                    this.props.mount()\r\n                }\r\n                else {\r\n                    comp.setState({\r\n                        success: response.data\r\n                    })\r\n                }\r\n\r\n            })\r\n            .catch(errors => {\r\n                console.log(errors, \"Erzrp\")\r\n                comp.setState({\r\n                    success: \"Something Went Wrong!\"\r\n                })\r\n\r\n            })\r\n        this.clearform()\r\n    }\r\n    lang2(ev) {\r\n        localStorage.setItem('lang', ev);\r\n        this.setState({\r\n            lang: ev\r\n        })\r\n\r\n    }\r\n    handlefield(event) {\r\n        event.preventDefault();\r\n        this.setState({\r\n            [event.target.name]: event.target.value,\r\n        })\r\n\r\n    }\r\n    lang1() {\r\n        if (localStorage.getItem('lang') === 'en') {\r\n\r\n            return LOCALES.English\r\n        }\r\n        else if (localStorage.getItem('lang') === 'ru') {\r\n            return LOCALES.Russian\r\n        }\r\n        else if (localStorage.getItem('lang') === 'uz') {\r\n            return LOCALES.Uzbek\r\n        }\r\n        else {\r\n            return LOCALES.Uzbek\r\n        }\r\n    }\r\n    render() {\r\n        let csrf = cookie.load('csrftoken');\r\n\r\n        if (this.state.login) {\r\n            return <Redirect to='/' />\r\n        }\r\n        else {\r\n            return (\r\n\r\n                <div>\r\n\r\n\r\n\r\n                    <I18nProvider locale={this.lang1()} >\r\n\r\n                        <form onSubmit={this.handleSubmit} ref={(el) => this.PostCreateForm = el} className=\"container\">\r\n                            <h2>{translate('login')}</h2><br />\r\n                            <div >{this.state.success !== '' ? <div className='alert alert-danger'>{this.state.success}</div> : this.empty()}   </div>\r\n                            <label>{translate('username')}</label>\r\n                            <FormattedMessage id='username' defaultMessage='Sizning foydalanuvchi nomingiz'>\r\n                                {placeholder3 => (\r\n                                    <input className='form-control' placeholder={placeholder3} type=\"text\" name=\"username\" id=\"\" onChange={this.handlefield} required='required' />\r\n                                )}\r\n                            </FormattedMessage>\r\n\r\n                            <br />\r\n                            <label>{translate('password')}</label>\r\n                            <FormattedMessage id='password' defaultMessage='Sizning ismingiz'>\r\n                                {placeholder4 => (\r\n                                    <input className='form-control' type=\"password\" placeholder={placeholder4} name=\"password\" onChange={this.handlefield} required='required' />\r\n                                )}\r\n                            </FormattedMessage>\r\n\r\n                            <br />\r\n                            <br />\r\n\r\n                            <button type='submit' className='btn btn-info'>{translate('submit')}</button>\r\n\r\n                        </form>\r\n                    </I18nProvider>\r\n                </div>\r\n            );\r\n        }\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}